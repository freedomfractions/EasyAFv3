<UserControl x:Class="EasyAF.Modules.Project.Views.Panels.ProjectInformationPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:conv="clr-namespace:EasyAF.Modules.Project.Converters"
             xmlns:behaviors="clr-namespace:EasyAF.Modules.Project.Behaviors"
             xmlns:i="http://schemas.microsoft.com/xaml/behaviors">
    <UserControl.Resources>
        <!-- Converters needed for this panel -->
        <conv:MultiplyConverter x:Key="MultiplyConverter"/>
    </UserControl.Resources>
    
    <GroupBox Header="Project Information" 
              Margin="0,0,22,16"
              HorizontalAlignment="Stretch"
              BorderBrush="{DynamicResource ControlBorderBrush}"
              Foreground="{DynamicResource TextPrimaryBrush}">
        <Grid x:Name="ProjectFieldsGrid" Margin="8" Grid.IsSharedSizeScope="True">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" SharedSizeGroup="Label1"/>
                <ColumnDefinition Width="1.5*"/>
                <ColumnDefinition Width="Auto" SharedSizeGroup="Label2"/>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="0.5*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="0.5*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="32"/>
                <RowDefinition Height="32"/>
                <RowDefinition Height="32"/>
                <RowDefinition Height="32"/>
                <RowDefinition Height="32"/>
                <RowDefinition Height="32"/>
                <RowDefinition Height="32"/>
                <RowDefinition Height="8"/>
                <RowDefinition Height="80"/>
                <RowDefinition Height="8"/>
                <RowDefinition Height="32"/>
                <RowDefinition Height="8"/>
                <RowDefinition Height="32"/>
            </Grid.RowDefinitions>
            
            <!-- Row 0: LB Project Number | Site Name -->
            <TextBlock Grid.Row="0" Grid.Column="0" Text="LB Project Number:" VerticalAlignment="Center" Margin="0,0,8,0" Foreground="{DynamicResource TextPrimaryBrush}"/>
            <TextBox Grid.Row="0" Grid.Column="1" Text="{Binding LBProjectNumber, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" Margin="0,0,20,0" HorizontalAlignment="Stretch"/>
            
            <TextBlock Grid.Row="0" Grid.Column="2" Text="Site Name:" VerticalAlignment="Center" Margin="0,0,8,0" Foreground="{DynamicResource TextPrimaryBrush}"/>
            <TextBox Grid.Row="0" Grid.Column="3" Grid.ColumnSpan="5" Text="{Binding SiteName, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" HorizontalAlignment="Stretch"/>
            
            <!-- Row 1: Client | Study Engineer -->
            <TextBlock Grid.Row="1" Grid.Column="0" Text="Client:" VerticalAlignment="Center" Margin="0,0,8,0" Foreground="{DynamicResource TextPrimaryBrush}"/>
            <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding Client, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" Margin="0,0,20,0" HorizontalAlignment="Stretch"/>
            
            <TextBlock Grid.Row="1" Grid.Column="2" Text="Study Engineer:" VerticalAlignment="Center" Margin="0,0,8,0" Foreground="{DynamicResource TextPrimaryBrush}"/>
            <TextBox Grid.Row="1" Grid.Column="3" Grid.ColumnSpan="5" Text="{Binding StudyEngineer, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" HorizontalAlignment="Stretch"/>
            
            <!-- Row 2: Address Line 1 -->
            <TextBlock Grid.Row="2" Grid.Column="0" Text="Address Line 1:" VerticalAlignment="Center" Margin="0,0,8,0" Foreground="{DynamicResource TextPrimaryBrush}"/>
            <TextBox Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="7" Text="{Binding AddressLine1, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" HorizontalAlignment="Stretch"/>
            
            <!-- Row 3: Address Line 2 -->
            <TextBlock Grid.Row="3" Grid.Column="0" Text="Address Line 2:" VerticalAlignment="Center" Margin="0,0,8,0" Foreground="{DynamicResource TextPrimaryBrush}"/>
            <TextBox Grid.Row="3" Grid.Column="1" Grid.ColumnSpan="7" Text="{Binding AddressLine2, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" HorizontalAlignment="Stretch"/>
            
            <!-- Row 4: Address Line 3 -->
            <TextBlock Grid.Row="4" Grid.Column="0" Text="Address Line 3:" VerticalAlignment="Center" Margin="0,0,8,0" Foreground="{DynamicResource TextPrimaryBrush}"/>
            <TextBox Grid.Row="4" Grid.Column="1" Grid.ColumnSpan="7" Text="{Binding AddressLine3, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" HorizontalAlignment="Stretch"/>
            
            <!-- Row 5: City | State | Zip -->
            <Grid Grid.Row="5" Grid.Column="0" Grid.ColumnSpan="8" HorizontalAlignment="Left"
                  Width="{Binding ActualWidth, ElementName=ProjectFieldsGrid, Converter={StaticResource MultiplyConverter}, ConverterParameter=0.9}"
                  MaxWidth="1080">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" SharedSizeGroup="Label1"/>
                    <ColumnDefinition Width="1.5*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="0.5*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="0.5*"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock Grid.Column="0" Text="City:" VerticalAlignment="Center" Margin="0,0,8,0" Foreground="{DynamicResource TextPrimaryBrush}"/>
                <TextBox Grid.Column="1" Text="{Binding City, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" Margin="0,0,20,0" HorizontalAlignment="Stretch"/>
                
                <TextBlock Grid.Column="2" Text="State:" VerticalAlignment="Center" Margin="0,0,8,0" Foreground="{DynamicResource TextPrimaryBrush}"/>
                <ComboBox Grid.Column="3" Text="{Binding State, UpdateSourceTrigger=PropertyChanged}" 
                          VerticalAlignment="Center" Margin="0,0,20,0" HorizontalAlignment="Stretch" IsEditable="True">
                    <ComboBox.Items>
                        <ComboBoxItem Content="AL"/><ComboBoxItem Content="AK"/><ComboBoxItem Content="AZ"/><ComboBoxItem Content="AR"/>
                        <ComboBoxItem Content="CA"/><ComboBoxItem Content="CO"/><ComboBoxItem Content="CT"/><ComboBoxItem Content="DE"/>
                        <ComboBoxItem Content="FL"/><ComboBoxItem Content="GA"/><ComboBoxItem Content="HI"/><ComboBoxItem Content="ID"/>
                        <ComboBoxItem Content="IL"/><ComboBoxItem Content="IN"/><ComboBoxItem Content="IA"/><ComboBoxItem Content="KS"/>
                        <ComboBoxItem Content="KY"/><ComboBoxItem Content="LA"/><ComboBoxItem Content="ME"/><ComboBoxItem Content="MD"/>
                        <ComboBoxItem Content="MA"/><ComboBoxItem Content="MI"/><ComboBoxItem Content="MN"/><ComboBoxItem Content="MS"/>
                        <ComboBoxItem Content="MO"/><ComboBoxItem Content="MT"/><ComboBoxItem Content="NE"/><ComboBoxItem Content="NV"/>
                        <ComboBoxItem Content="NH"/><ComboBoxItem Content="NJ"/><ComboBoxItem Content="NM"/><ComboBoxItem Content="NY"/>
                        <ComboBoxItem Content="NC"/><ComboBoxItem Content="ND"/><ComboBoxItem Content="OH"/><ComboBoxItem Content="OK"/>
                        <ComboBoxItem Content="OR"/><ComboBoxItem Content="PA"/><ComboBoxItem Content="RI"/><ComboBoxItem Content="SC"/>
                        <ComboBoxItem Content="SD"/><ComboBoxItem Content="TN"/><ComboBoxItem Content="TX"/><ComboBoxItem Content="UT"/>
                        <ComboBoxItem Content="VT"/><ComboBoxItem Content="VA"/><ComboBoxItem Content="WA"/><ComboBoxItem Content="WV"/>
                        <ComboBoxItem Content="WI"/><ComboBoxItem Content="WY"/>
                    </ComboBox.Items>
                </ComboBox>
                
                <TextBlock Grid.Column="4" Text="Zip:" VerticalAlignment="Center" Margin="0,0,8,0" Foreground="{DynamicResource TextPrimaryBrush}"/>
                <TextBox Grid.Column="5" Text="{Binding Zip, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" MaxLength="5" HorizontalAlignment="Stretch"/>
            </Grid>
            
            <!-- Row 6: Study Date | Revision Month -->
            <Grid Grid.Row="6" Grid.Column="0" Grid.ColumnSpan="8" HorizontalAlignment="Left"
                  Width="{Binding ActualWidth, ElementName=ProjectFieldsGrid, Converter={StaticResource MultiplyConverter}, ConverterParameter=0.9}"
                  MaxWidth="1080">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" SharedSizeGroup="Label1"/>
                    <ColumnDefinition Width="1*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="1.5*"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock Grid.Column="0" Text="Study Date:" VerticalAlignment="Center" Margin="0,0,8,0" Foreground="{DynamicResource TextPrimaryBrush}"/>
                <DatePicker Grid.Column="1" SelectedDate="{Binding StudyDateValue, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" Margin="0,0,20,0" HorizontalAlignment="Stretch"/>
                
                <TextBlock Grid.Column="2" Text="Revision Month:" VerticalAlignment="Center" Margin="0,0,8,0" Foreground="{DynamicResource TextPrimaryBrush}"/>
                <TextBox Grid.Column="3" Text="{Binding Revision, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" HorizontalAlignment="Stretch"/>
            </Grid>
            
            <!-- Row 8: Comments -->
            <TextBlock Grid.Row="8" Grid.Column="0" Text="Comments:" VerticalAlignment="Top" Margin="0,4,8,0" Foreground="{DynamicResource TextPrimaryBrush}"/>
            <TextBox Grid.Row="8" Grid.Column="1" Grid.ColumnSpan="7" 
                     Text="{Binding Comments, UpdateSourceTrigger=PropertyChanged}" 
                     TextWrapping="Wrap" 
                     AcceptsReturn="True" 
                     VerticalScrollBarVisibility="Auto"
                     HorizontalAlignment="Stretch"
                     VerticalAlignment="Stretch"/>
            
            <!-- Row 10: Import Map -->
            <TextBlock Grid.Row="10" Grid.Column="0" Text="Import Map:" VerticalAlignment="Center" Margin="0,0,8,0" Foreground="{DynamicResource TextPrimaryBrush}"/>
            <ComboBox Grid.Row="10" Grid.Column="1" 
                      ItemsSource="{Binding AvailableMappings}"
                      SelectedItem="{Binding SelectedMapping}"
                      VerticalAlignment="Center" 
                      Margin="0,0,20,0" 
                      HorizontalAlignment="Stretch"
                      HorizontalContentAlignment="Left"
                      VerticalContentAlignment="Center">
                <i:Interaction.Behaviors>
                    <behaviors:RefreshOnDropDownBehavior RefreshAction="{Binding RefreshMappingsAction}"/>
                </i:Interaction.Behaviors>
                <ComboBox.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding FormattedDisplayName}"/>
                    </DataTemplate>
                </ComboBox.ItemTemplate>
            </ComboBox>
            
            <Grid Grid.Row="10" Grid.Column="2" Grid.ColumnSpan="6" VerticalAlignment="Center">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock Grid.Column="0" Text="Path:" Margin="0,0,8,0" VerticalAlignment="Center" Foreground="{DynamicResource TextSecondaryBrush}"/>
                <TextBlock Grid.Column="1" 
                           Text="{Binding MappingPathDisplay}" 
                           VerticalAlignment="Center"
                           Foreground="{DynamicResource TextSecondaryBrush}"
                           TextTrimming="CharacterEllipsis"
                           ToolTip="{Binding MappingPathDisplay}"/>
                <TextBlock Grid.Column="2" 
                           Text="{Binding MappingValidationIcon}"
                           FontFamily="Segoe MDL2 Assets"
                           FontSize="16"
                           Margin="8,0,0,0"
                           VerticalAlignment="Center"
                           Foreground="{Binding MappingValidationBrush}"
                           ToolTip="{Binding MappingValidationTooltip}"/>
            </Grid>
            
            <!-- Row 12: Project Type -->
            <TextBlock Grid.Row="12" Grid.Column="0" Text="Project Type:" VerticalAlignment="Center" Margin="0,0,8,0" Foreground="{DynamicResource TextPrimaryBrush}"/>
            <StackPanel Grid.Row="12" Grid.Column="1" Grid.ColumnSpan="7" Orientation="Horizontal">
                <RadioButton Content="Standard EasyPower Model" 
                             IsChecked="{Binding IsStandardProjectType}" 
                             GroupName="ProjectType" 
                             Margin="0,0,20,0"
                             VerticalAlignment="Center"/>
                <RadioButton Content="Composite Model" 
                             IsChecked="{Binding IsCompositeProjectType}" 
                             GroupName="ProjectType"
                             VerticalAlignment="Center"/>
            </StackPanel>
        </Grid>
    </GroupBox>
</UserControl>
